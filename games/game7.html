\<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Platformer Level 1</title>
  <style>
    body { margin: 0; background: skyblue; overflow: hidden; font-family: sans-serif; }
    canvas { display: block; background: #87CEEB; }
    #story {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.8);
      color: white;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 10;
    }
    #startBtn {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 20px;
      background: yellow;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>
<div id="story">
  <h1>The Evil Boss Has Stolen Your Best Friend!</h1>
  <p>You must go through 10 dangerous levels to save them. Are you brave enough?</p>
  <button id="startBtn">Start Game</button>
</div>
<canvas id="game"></canvas>
<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
canvas.width = 800;
canvas.height = 500;

document.getElementById("startBtn").onclick = () => {
  document.getElementById("story").style.display = "none";
};

let player = {
  x: 50,
  y: 400,
  width: 30,
  height: 30,
  color: "black",
  vy: 0,
  grounded: false
};

const gravity = 0.5;
const jumpPower = -10;
const platforms = [
  {x: 0, y: 470, width: 800, height: 30},
  {x: 150, y: 400, width: 100, height: 20},
  {x: 300, y: 350, width: 100, height: 20},
  {x: 450, y: 300, width: 100, height: 20},
];

const vines = [
  {x: 575, y: 200, width: 20, height: 100},
];

const lava = [
  {x: 200, y: 470, width: 80, height: 30},
  {x: 600, y: 470, width: 80, height: 30},
];

const goal = { x: 700, y: 250, width: 30, height: 30, color: "yellow" };

let keys = {};
window.addEventListener("keydown", e => keys[e.key] = true);
window.addEventListener("keyup", e => keys[e.key] = false);

function resetPlayer() {
  player.x = 50;
  player.y = 400;
  player.vy = 0;
}

function drawRect(obj) {
  ctx.fillStyle = obj.color || "brown";
  ctx.fillRect(obj.x, obj.y, obj.width, obj.height);
}

function gameLoop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  for (let p of platforms) drawRect(p);
  for (let v of vines) drawRect({...v, color: "green"});
  for (let l of lava) drawRect({...l, color: "red"});
  drawRect(goal);

  if (keys["ArrowRight"]) player.x += 4;
  if (keys["ArrowLeft"]) player.x -= 4;

  player.vy += gravity;
  player.y += player.vy;

  player.grounded = false;
  for (let p of platforms) {
    if (
      player.x < p.x + p.width &&
      player.x + player.width > p.x &&
      player.y + player.height > p.y &&
      player.y + player.height < p.y + p.height + 5
    ) {
      player.y = p.y - player.height;
      player.vy = 0;
      player.grounded = true;
    }
  }

  if (keys["ArrowUp"] && player.grounded) {
    player.vy = jumpPower;
    player.grounded = false;
  }

  for (let l of lava) {
    if (
      player.x < l.x + l.width &&
      player.x + player.width > l.x &&
      player.y + player.height > l.y
    ) {
      resetPlayer();
    }
  }

  if (
    player.x < goal.x + goal.width &&
    player.x + player.width > goal.x &&
    player.y < goal.y + goal.height &&
    player.y + player.height > goal.y
  ) {
    alert("Level Complete! Loading Level 2...");
  }

  drawRect(player);
  requestAnimationFrame(gameLoop);
}
gameLoop();
</script>
</body>
</html>
